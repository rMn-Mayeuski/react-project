import React, {FC} from 'react';
import { IMovie } from '../../../../../types/types';

import styles from "./Rating.module.scss";
import {useMatch} from "react-router-dom";
import {Routes} from "../../../../App/AppRoutes/routes";

export enum RatingVariant {
    kp = "kp",
    imdb = "imdb"
}

interface RatingProps extends IMovie{
    variant: RatingVariant
}

const Rating = ({variant, rating}: RatingProps) => {
    const isTrendsPage = useMatch(Routes.trends);
    const isMoviePage = useMatch(Routes.movie)

    const movieRatingKp = `${rating?.kp}`.split("");
    const movieRatingImdb = `${rating?.imdb}`.split("");

    return (
        <>
            {variant === RatingVariant.kp
                ?
                <div className={`${styles.rating} ${isTrendsPage ? styles.trendsRating : ""} ${rating?.kp && (rating?.kp >= 7 ? styles.greenRating : rating?.kp <=5 ? styles.redRating : "")}`}>
                    {isTrendsPage &&
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.03562 0L7.05711 2.17207C6.35791 3.72381 5.4208 5.13509 4.28586 6.34554L4.1573 6.47741C3.42839 7.24599 3.01192 8.29864 3.00023 9.40195V9.54158C2.98093 11.7021 4.1663 13.6609 6.00004 14.4985L6.18574 14.5839C7.38842 15.1387 8.7471 15.1387 9.94978 14.5839H9.99264C11.8401 13.7121 13.0254 11.7214 12.9996 9.53382V6.16712C12.3839 7.69418 11.2658 8.91683 9.86407 9.59588C9.86407 9.59588 9.86407 9.59588 9.82122 9.59588C9.77837 9.59588 9.2784 9.82084 9.06413 9.59588C8.87275 9.38556 8.85442 9.0538 9.02127 8.82014L9.07127 8.78135H9.10698C10.7467 7.42768 11.129 4.91952 9.97835 3.06417C9.04984 1.5282 8.03562 0 8.03562 0Z" fill="white"/>
                        </svg>
                    }
                    {rating?.kp && movieRatingKp[0] + (movieRatingKp[1] || ".") + (movieRatingKp[2] || "0")}
                </div>
                :
                <div className={`${isMoviePage ? styles.ratingImdb : styles.rating} ${isTrendsPage ? styles.trendsRating : ""} ${rating?.imdb && (rating?.imdb >= 7 ? styles.greenRating : rating?.imdb <=5 ? styles.redRating : "")}`}>
                    {isMoviePage &&
                        <svg width="32" height="12" viewBox="0 0 32 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 0H3.27851V11.8282H0V0ZM14.7185 0V11.8282H11.8589L11.8463 3.84205L10.7058 11.8282H8.65996L7.4672 4.014L7.45373 11.8282H4.59478V0H8.83638C8.9487 0.718378 9.07805 1.55864 9.22916 2.52018L9.69545 5.52349L10.4498 0H14.7185ZM19.3033 2.01651V9.81169C19.7704 9.81169 20.0585 9.72283 20.1656 9.54388C20.272 9.36554 20.3269 8.8815 20.3269 8.09206V3.48735C20.3269 2.95036 20.3086 2.60661 20.272 2.45612C20.2355 2.30395 20.1544 2.19302 20.026 2.12272C19.8989 2.05136 19.6581 2.01651 19.3033 2.01651ZM16.0257 0H18.4739C20.0542 0 21.124 0.0681703 21.6807 0.204359C22.2383 0.341309 22.6624 0.565603 22.9521 0.876022C23.2418 1.18888 23.4235 1.5349 23.4962 1.91836C23.5697 2.30091 23.6062 3.05094 23.6062 4.17088V8.31392C23.6062 9.37604 23.552 10.0851 23.4465 10.443C23.3402 10.8011 23.1552 11.0811 22.8898 11.2841C22.6254 11.4858 22.2992 11.627 21.9106 11.7084C21.5219 11.7883 20.9368 11.8282 20.1536 11.8282H16.0259V0H16.0257ZM28.8526 4.89702C28.8526 4.39731 28.8181 4.07182 28.7496 3.91798C28.6811 3.76505 28.5486 3.68821 28.3482 3.68821C28.153 3.68821 28.0264 3.75562 27.9687 3.88785C27.9106 4.02161 27.8819 4.35835 27.8819 4.89687V9.06303C27.8819 9.58253 27.9149 9.91456 27.9807 10.0602C28.0455 10.2067 28.1766 10.2781 28.3708 10.2781C28.5702 10.2781 28.7002 10.204 28.7608 10.053C28.8216 9.90178 28.8521 9.54069 28.8521 8.96732L28.8526 4.89702ZM27.8819 0V2.81554C28.1427 2.53038 28.4328 2.31734 28.752 2.1772C29.0735 2.03766 29.4218 1.96736 29.7969 1.96736C30.2283 1.96736 30.6029 2.03081 30.9213 2.15666C31.239 2.28417 31.4814 2.4616 31.648 2.68969C31.8143 2.91855 31.9151 3.14285 31.9494 3.36136C31.9823 3.58002 32 4.04641 32 4.76159V9.12481C32 9.83543 31.9494 10.3644 31.8465 10.7122C31.746 11.0605 31.5058 11.3624 31.131 11.6175C30.7553 11.8725 30.3098 12 29.7938 12C29.423 12 29.0774 11.9239 28.7562 11.7717C28.4345 11.619 28.1405 11.3907 27.8759 11.0876L27.6724 11.8282H24.7352V0H27.8819Z" fill="white"/>
                        </svg>
                    }
                    {isTrendsPage &&
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.03562 0L7.05711 2.17207C6.35791 3.72381 5.4208 5.13509 4.28586 6.34554L4.1573 6.47741C3.42839 7.24599 3.01192 8.29864 3.00023 9.40195V9.54158C2.98093 11.7021 4.1663 13.6609 6.00004 14.4985L6.18574 14.5839C7.38842 15.1387 8.7471 15.1387 9.94978 14.5839H9.99264C11.8401 13.7121 13.0254 11.7214 12.9996 9.53382V6.16712C12.3839 7.69418 11.2658 8.91683 9.86407 9.59588C9.86407 9.59588 9.86407 9.59588 9.82122 9.59588C9.77837 9.59588 9.2784 9.82084 9.06413 9.59588C8.87275 9.38556 8.85442 9.0538 9.02127 8.82014L9.07127 8.78135H9.10698C10.7467 7.42768 11.129 4.91952 9.97835 3.06417C9.04984 1.5282 8.03562 0 8.03562 0Z" fill="white"/>
                        </svg>
                    }
                    {rating?.imdb && movieRatingImdb[0] + (movieRatingImdb[1] || ".") + (movieRatingImdb[2] || "0")}
                </div>
            }
        </>
    );
};

export default Rating;